Lade XML Datei mit den Informationen über die Dateien
Load xml file with file informationen

{{$LOADXML global: "global.xml"}}

Lade das Seitendesign
Load site design

{{$IMPORT style: "style.html"}}

Definiert eine Funktion, die den Dateinamen einer Einzelseite zurück gibt
Defines a function which returns the url of a single page

{{$DEFINE $file-url fileinfo language}*}
  {{$IF fileinfo/url != ""}*}
    {{$WRITE fileinfo/url"_"language/id}*}
  {{$ELSE}*}
    {{$WRITE fileinfo/basefilename"_"language/id}*}
    {{$IF fileinfo/extension != ""}*}
      {{$WRITE fileinfo/extension}*}
    {{$ELSE}*}
      {{$WRITE ".html"}*}
    {{$/IF}*}
  {{$/IF}*}
{{$/DEFINE}

Definiert eine Funktion, die einen Link zu einer Seite einfügt
Defines a function which will write a link to a page

{{$DEFINE $link-to fileinfo language}*}
  <a href="{{$$file-url fileinfo language}}">{{$WRITE fileinfo/title}**}</a>
{{$/DEFINE}



Definiert die Umwandlung einer xml Seitendefinition zu html
Defines transformation of xml data to html

{{$DEFINE $rec-transform fileparent}*}
  {{$FOREACH fileinfo: fileparent/fileinfo}*}
   {{$IF fileinfo/basefilename != ""}*}
    {{$LOADXML file: fileinfo/basefilename".xml"}*}
    {{$OUTPUT style >> "_publish/"$file-url "ISO-8859-1"}*}
    {{$$rec-transform fileinfo}*}
   {{$/IF}*}
  {{$/FOREACH}*}
{{$/DEFINE*}

Erzeugt jede Seite
Create every page

{{$FOREACH language: global/language}*}
  {{$PREFER "language" == language/id}*}
  {{$$rec-transform global}}
{{$/FOREACH}*}
  
